The Incognito module in Metasploit is a tool used for post-exploitation purposes, specifically for privilege escalation and maintaining access on a compromised system. Here's how it works:
Token Stealing:  When Incognito is used on a compromised system infected with a Meterpreter payload, it attempts to steal user tokens from memory. 
These tokens are essentially digital keys that grant access to system resources and represent a user's permissions.
Impersonation:  Once Incognito steals a token, it allows the attacker to impersonate the legitimate user associated with that token. 
This grants the attacker the same level of access and privileges as the stolen token's user.
Maintaining Persistence:  By impersonating a legitimate user, the attacker can potentially bypass security restrictions and perform actions that wouldn't be possible with their initial access level. 
This can be used to establish persistence on the system, meaning they can maintain control even after a system reboot.
Living off the Land:  Since Incognito leverages legitimate system functionality (stealing tokens and impersonation) to achieve its goals, it can be harder to detect by security software that might focus on identifying malicious code.
This technique is sometimes referred to as "living off the land."

USING INCOGNTIO

After establishing a meterpreter shell, we will do the following
First, start incognito 
-load_incognito 

Then, we list the available tokens
-list_tokens -u

Once you have the token you want to impersonate, run
-impersonate_token <TOKEN\\NAME>

To check if it worked, run
-getuid
